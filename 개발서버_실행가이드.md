# Django 개발 서버 실행 가이드

## 빠른 시작

### 1단계: 가상환경 활성화

프로젝트에 `venv` 폴더가 있으므로 가상환경을 활성화합니다.

**Windows (PowerShell):**
```powershell
.\venv\Scripts\Activate.ps1
```

**Windows (CMD):**
```cmd
venv\Scripts\activate.bat
```

가상환경이 활성화되면 프롬프트 앞에 `(venv)`가 표시됩니다.

### 2단계: 의존성 설치 (처음 한 번만)

```bash
pip install -r requirements.txt
```

### 3단계: 환경 변수 설정

`.env` 파일이 없다면 `env.example`을 복사해서 생성하세요:

**Windows (PowerShell):**
```powershell
Copy-Item env.example .env
```

**Windows (CMD):**
```cmd
copy env.example .env
```

그리고 `.env` 파일을 열어서 필요한 값들을 입력하세요:
- `DJANGO_SECRET_KEY`: Django 시크릿 키 (필수)
- Oracle DB 정보 (DB 사용 시)
- 카카오/OpenAI API 키 (해당 기능 사용 시)

### 4단계: 데이터베이스 마이그레이션 (처음 한 번만)

```bash
python manage.py migrate
```

### 5단계: 개발 서버 실행

```bash
python manage.py runserver
```

서버가 시작되면 다음과 같은 메시지가 표시됩니다:
```
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

### 6단계: 브라우저에서 접속

- **메인 페이지**: http://127.0.0.1:8000/
- **추천 폼 페이지**: http://127.0.0.1:8000/old/
- **온보딩 페이지**: http://127.0.0.1:8000/onboarding/new/

---

## 상세 설명

### 포트 변경하기

기본 포트는 8000입니다. 다른 포트를 사용하려면:

```bash
python manage.py runserver 8080
```

### 모든 IP에서 접근 허용

다른 기기에서 접근하려면:

```bash
python manage.py runserver 0.0.0.0:8000
```

### Django Secret Key 생성

`.env` 파일에 `DJANGO_SECRET_KEY`가 없다면 생성하세요:

```bash
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

생성된 키를 `.env` 파일에 추가하세요.

---

## 문제 해결

### 1. "ModuleNotFoundError: No module named 'django'"

**원인**: 가상환경이 활성화되지 않았거나 의존성이 설치되지 않음

**해결**:
```bash
# 가상환경 활성화 확인
# 프롬프트에 (venv)가 표시되어야 함

# 의존성 설치
pip install -r requirements.txt
```

### 2. "django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty"

**원인**: `.env` 파일이 없거나 `DJANGO_SECRET_KEY`가 설정되지 않음

**해결**:
1. `env.example`을 복사해서 `.env` 파일 생성
2. Django Secret Key 생성 후 `.env`에 추가

### 3. "django.db.utils.OperationalError: ..."

**원인**: 데이터베이스 연결 문제

**해결**:
- `.env` 파일의 Oracle DB 설정 확인
- 또는 SQLite 사용 시 마이그레이션 실행:
  ```bash
  python manage.py migrate
  ```

### 4. 포트가 이미 사용 중

**원인**: 8000 포트가 다른 프로세스에서 사용 중

**해결**:
```bash
# 다른 포트 사용
python manage.py runserver 8080
```

---

## 유용한 명령어

### 관리자 계정 생성
```bash
python manage.py createsuperuser
```

### 마이그레이션 생성 (모델 변경 시)
```bash
python manage.py makemigrations
python manage.py migrate
```

### 정적 파일 수집 (프로덕션 배포 시)
```bash
python manage.py collectstatic
```

### Django Shell 실행
```bash
python manage.py shell
```

---

## 개발 워크플로우

1. **가상환경 활성화**
   ```powershell
   .\venv\Scripts\Activate.ps1
   ```

2. **서버 실행**
   ```bash
   python manage.py runserver
   ```

3. **코드 수정 후**: 서버가 자동으로 재시작됩니다 (대부분의 경우)

4. **서버 종료**: `CTRL + C` 또는 `CTRL + BREAK`

---

## 참고

- 개발 서버는 **프로덕션 환경에서 사용하면 안 됩니다**
- 코드 변경 시 자동으로 재시작되지만, 일부 설정 변경은 수동 재시작이 필요할 수 있습니다
- 로그는 터미널에 실시간으로 표시됩니다


