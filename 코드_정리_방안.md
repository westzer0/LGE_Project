# 코드 정리 방안

## 현재 상황 분석

### 사용 중인 추천 엔진
1. **recommendation_engine.py** (기존)
   - views.py에서 4곳 사용 중
   - 제품 타입별 그룹화 로직 (product_type_classifier 사용)
   - 세분화된 제품 타입별 추천 (세탁기, 냉장고, TV 등)

2. **playbook_recommendation_engine.py**
   - views.py에서 사용 중
   - Playbook 방식 추천

3. **column_based_recommendation_engine.py**
   - views.py에서 사용 중
   - 컬럼 기반 추천

4. **taste_based_recommendation_engine.py** (새로 만든 것)
   - views.py에서 사용 안 함
   - MAIN CATEGORY별 추천 (TV, KITCHEN, LIVING 등)
   - **사용자가 원하는 새로운 로직**

### 문제점

1. **중복된 로직**
   - `recommendation_engine.py`: 제품 타입별 추천
   - `taste_based_recommendation_engine.py`: MAIN CATEGORY별 추천
   - 둘 다 "제품을 그룹화해서 각 그룹에서 3개씩 선택"하는 로직

2. **사용되지 않는 코드**
   - `product_type_classifier.py`: recommendation_engine에서만 사용
   - `recommendation_engine.py`의 제품 타입별 로직: 새로운 방식과 중복

3. **혼란스러운 구조**
   - 여러 추천 엔진이 공존
   - 어떤 것을 사용해야 할지 불명확

## 정리 방안

### 옵션 1: 완전 교체 (추천)
- `views.py`에서 `recommendation_engine` → `taste_based_recommendation_engine`으로 교체
- `recommendation_engine.py`의 제품 타입별 로직 삭제
- `product_type_classifier.py` 삭제 (또는 보관)
- 장점: 깔끔하고 명확
- 단점: 기존 API 호환성 문제 가능

### 옵션 2: 병행 운영
- `taste_based_recommendation_engine`을 새로운 엔드포인트로 추가
- 기존 `recommendation_engine`은 유지
- 장점: 기존 코드 영향 없음
- 단점: 코드 중복 유지

### 옵션 3: 점진적 교체
- 새로운 엔진을 기본으로 사용
- 기존 엔진은 deprecated로 표시
- 일정 기간 후 삭제
- 장점: 안전한 전환
- 단점: 일시적 중복

## 추천: 옵션 1 (완전 교체)

이유:
1. 사용자가 원하는 로직이 명확함 (MAIN CATEGORY별 추천)
2. 기존 제품 타입별 로직은 더 이상 필요 없음
3. 코드베이스가 깔끔해짐
4. 유지보수 용이

## 삭제 대상 파일/코드

1. **recommendation_engine.py**의 제품 타입별 로직
   - `_score_products_by_type()` 메서드
   - `_get_product_type_multiplier()` 메서드
   - `get_recommendations()`의 제품 타입별 그룹화 부분

2. **product_type_classifier.py** (전체 파일)
   - recommendation_engine에서만 사용
   - 새로운 로직에서는 사용 안 함

3. **playbook_recommendation_engine.py** (선택적)
   - 사용 중이면 유지
   - 사용 안 하면 삭제

4. **column_based_recommendation_engine.py** (선택적)
   - 사용 중이면 유지
   - 사용 안 하면 삭제

## 수정 대상 파일

1. **api/views.py**
   - `recommendation_engine` → `taste_based_recommendation_engine`으로 교체
   - taste_id를 전달하도록 수정

2. **api/services/__init__.py**
   - export 목록 업데이트

