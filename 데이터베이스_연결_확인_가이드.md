# 데이터베이스 연결 확인 가이드

## 📍 실행 위치

**프로젝트 루트 디렉토리**에서 실행하세요:
```
C:\Users\134\Desktop\DX Project
```

이 폴더에 다음 파일들이 있어야 합니다:
- `manage.py`
- `check_connection.py`
- `config/settings.py`

---

## 방법 1: check_connection.py 실행

### 단계별 설명

1. **터미널 열기**
   - PowerShell 또는 CMD를 엽니다
   - 또는 VS Code의 터미널을 사용합니다

2. **프로젝트 폴더로 이동**
   ```bash
   cd "C:\Users\134\Desktop\DX Project"
   ```

3. **가상환경 활성화** (필요한 경우)
   ```bash
   .\venv\Scripts\activate
   ```
   - 가상환경이 활성화되면 프롬프트 앞에 `(venv)`가 표시됩니다

4. **스크립트 실행**
   ```bash
   python check_connection.py
   ```

### 예상 출력
```
============================================================
Oracle 데이터베이스 연결 확인
============================================================

연결 설정:
  NAME: project-db-campus.smhrd.com:1524/MAPPP
  USER: campus_24K_LG3_DX7_p3_4
  HOST: 
  PORT: 

연결 테스트 중...

============================================================
✅ 연결 성공!
============================================================
사용자: CAMPUS_24K_LG3_DX7_P3_4
서버 시간: 2024-12-XX XX:XX:XX
상태: 연결 성공!
============================================================
```

---

## 방법 2: Django Shell 사용

### 단계별 설명

1. **터미널 열기**
   - PowerShell 또는 CMD를 엽니다

2. **프로젝트 폴더로 이동**
   ```bash
   cd "C:\Users\134\Desktop\DX Project"
   ```

3. **가상환경 활성화** (필요한 경우)
   ```bash
   .\venv\Scripts\activate
   ```

4. **Django Shell 실행**
   ```bash
   python manage.py shell
   ```

5. **Python 코드 입력**
   ```python
   from django.db import connection
   cursor = connection.cursor()
   cursor.execute("SELECT USER, SYSDATE FROM DUAL")
   result = cursor.fetchone()
   print(f"사용자: {result[0]}")
   print(f"서버 시간: {result[1]}")
   ```

6. **종료**
   - `exit()` 또는 `Ctrl+Z` (Windows) 또는 `Ctrl+D` (Linux/Mac)

### 전체 예시
```bash
(venv) PS C:\Users\134\Desktop\DX Project> python manage.py shell
[ENV] .env 파일 로드 완료: C:\Users\134\Desktop\DX Project\.env
Python 3.13.1 on win32
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from django.db import connection
>>> cursor = connection.cursor()
>>> cursor.execute("SELECT USER, SYSDATE FROM DUAL")
>>> result = cursor.fetchone()
>>> print(f"사용자: {result[0]}")
사용자: CAMPUS_24K_LG3_DX7_P3_4
>>> print(f"서버 시간: {result[1]}")
서버 시간: 2024-12-XX XX:XX:XX
>>> exit()
```

---

## 방법 3: Django 관리 명령어 사용

### 데이터베이스 연결 확인
```bash
python manage.py check --database default
```

### 데이터베이스 Shell (SQL 직접 실행)
```bash
python manage.py dbshell
```
- Oracle SQL을 직접 실행할 수 있습니다
- 종료: `exit` 또는 `quit`

---

## 🔧 문제 해결

### 오류: "No module named 'django'"
**해결**: 가상환경을 활성화하세요
```bash
.\venv\Scripts\activate
```

### 오류: "cannot connect to database"
**확인 사항**:
1. `.env` 파일이 프로젝트 루트에 있는지 확인
2. `.env` 파일에 올바른 DB 정보가 있는지 확인
3. 네트워크 연결 확인 (방화벽, VPN 등)

### 오류: "SID is not registered"
**해결**: `config/settings.py`의 데이터베이스 설정이 올바른지 확인
- Service Name 형식: `HOST:PORT/SERVICE_NAME`

---

## 📝 빠른 참조

### 현재 디렉토리 확인
```bash
pwd  # PowerShell
cd   # CMD
```

### 파일 목록 확인
```bash
dir   # Windows
ls    # PowerShell
```

### 가상환경 활성화 확인
- 프롬프트에 `(venv)`가 표시되면 활성화됨

---

## ✅ 연결 성공 확인

다음 중 하나라도 성공하면 연결이 정상입니다:
- ✅ `check_connection.py` 실행 시 "연결 성공!" 메시지
- ✅ Django shell에서 쿼리 실행 성공
- ✅ `python manage.py check --database default` 성공



