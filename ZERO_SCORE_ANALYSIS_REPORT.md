# 모든 레코드에서 0점인 칼럼 분석 보고서

## 요약

총 **10개**의 칼럼이 모든 레코드(taste_id 1-120)에서 0점입니다.

## 100% 0점인 칼럼 목록

1. `OBJET_SCORE`
2. `SIGNATURE_SCORE`
3. `건조기_SCORE`
4. `로봇청소기_SCORE`
5. `사운드바_SCORE`
6. `세탁기_SCORE`
7. `오븐_SCORE`
8. `워시타워_SCORE`
9. `의류관리기_SCORE`
10. `전자레인지_SCORE`

## 원인 분석

### 1. 카테고리명 불일치 (가장 큰 원인)

**Oracle DB의 실제 카테고리명**과 **점수 계산 로직에서 사용하는 카테고리명**이 다릅니다.

#### 문제가 있는 카테고리 매핑:

| 점수 계산 로직 | Oracle DB 실제 카테고리명 | 상태 |
|--------------|------------------------|------|
| `세탁기` | `세탁` | ❌ 불일치 |
| `전자레인지` | `광파오븐전자레인지` | ❌ 불일치 |
| `오븐` | `광파오븐전자레인지` (또는 없음) | ❌ 불일치 |
| `건조기` | 존재하지 않음 | ❌ 없음 |
| `워시타워` | 존재하지 않음 | ❌ 없음 |
| `로봇청소기` | `청소기` (통합) | ❌ 없음 |
| `사운드바` | `오디오` (또는 없음) | ❌ 없음 |

#### Oracle DB에 실제로 존재하는 카테고리:
- `냉장고`, `세탁`, `김치냉장고`, `TV`, `에어컨`, `청소기`, `공기청정기`, `의류관리기`, `식기세척기`, `광파오븐전자레인지`, `정수기`, `제습기`, `오디오`, `프로젝터` 등

### 2. Ill-suited가 아닌데도 0점

**분석 결과**: 모든 0점 카테고리들이 `ILL_SUITED_CATEGORIES`에 포함되지 않았습니다.
- 즉, ill-suited가 원인이 **아님**
- 점수 계산 로직 자체에서 점수를 주지 못하고 있음

### 3. 카테고리명이 점수 계산 로직에 없는 경우

#### A. OBJET, SIGNATURE
- **원인**: 이들은 `MAIN_CATEGORY`가 아니라 **브랜드 라인**입니다.
- 실제 제품의 `MAIN_CATEGORY`는 `TV`, `냉장고` 등이고,
- `OBJET`/`SIGNATURE`는 별도의 제품 속성입니다.
- **해결방안**: 이 카테고리는 점수 계산에서 제외하거나, 별도 처리가 필요합니다.

#### B. 로봇청소기, 사운드바
- **원인**: Oracle DB에 별도 카테고리로 존재하지 않거나, 다른 이름으로 통합되어 있음
- `로봇청소기` → `청소기`로 통합될 수 있음
- `사운드바` → `오디오`로 통합될 수 있음

### 4. 점수 계산 로직에는 있지만 조건이 맞지 않는 경우

#### 예시: 의류관리기
- Oracle DB에 존재: ✓
- 점수 계산 로직에 포함: ✓
- 하지만 `main_space='living'`이고 `laundry='weekly'`일 때는 **7점**만 받음
- `main_space='dressing'`이고 `laundry='daily'`일 때는 **27점** 받음
- 대부분의 taste가 `main_space='living'`이고 `laundry='weekly'`이면 점수가 낮아 0점일 수 있음

## 상세 분석 결과

### 테스트 케이스별 점수

#### 케이스 1: `main_space='living'`, `laundry='weekly'`
- 의류관리기: **7.0점** (낮은 점수)

#### 케이스 2: `main_space='dressing'`, `laundry='daily'`
- 의류관리기: **27.0점** (적정 점수)

### 점수 계산 로직에 포함된 카테고리

다음 카테고리들은 로직에 명시적으로 포함되어 있습니다:
- TV, 건조기, 공기청정기, 김치냉장고, 냉장고, 세탁기, 식기세척기, 에어컨, 오븐, 와인셀러, 워시타워, 의류관리기, 전자레인지, 정수기, 제습기, 청소기

하지만 **Oracle DB의 실제 카테고리명과 매칭되지 않으면** 점수를 받을 수 없습니다.

## 해결 방안

### 1. 카테고리명 매핑 추가 (즉시 적용 가능)

`taste_category_selector.py`의 `_calculate_category_score` 함수에 카테고리명 매핑을 추가:

```python
# 카테고리명 정규화
CATEGORY_NAME_MAPPING = {
    '세탁': '세탁기',  # Oracle DB '세탁' → 로직 '세탁기'
    '광파오븐전자레인지': '전자레인지',  # Oracle DB → 로직
    # 또는 점수 계산 전에 카테고리명을 정규화
}
```

### 2. 점수 계산 로직 수정

Oracle DB의 실제 카테고리명을 직접 사용하도록 로직 수정:
- `space_scores`에 `'세탁'` 추가
- `household_size`에 `'세탁'` 추가
- `laundry` 로직에 `'세탁'` 추가

### 3. 의류관리기 점수 보정

`main_space='living'`일 때도 의류관리기에 기본 점수를 더 부여:
- 현재: 7점 (너무 낮음)
- 제안: 15점 이상으로 보정

### 4. OBJET/SIGNATURE 처리

이들은 브랜드 라인이므로:
- 옵션 1: 점수 계산에서 완전히 제외 (현재 상태 유지)
- 옵션 2: 별도의 브랜드 점수 칼럼으로 분리
- 옵션 3: 각 제품의 실제 `MAIN_CATEGORY`에 점수 부여 후, OBJET/SIGNATURE 제품에 가중치 적용

## 권장 조치 사항

1. **즉시 조치**: 카테고리명 매핑 추가 (`세탁` → `세탁기`, `광파오븐전자레인지` → `전자레인지`)
2. **점수 로직 보정**: `main_space='living'`일 때 세탁 관련 카테고리 점수 상향
3. **데이터 재생성**: 수정 후 모든 taste_id 1-120 데이터 재생성


